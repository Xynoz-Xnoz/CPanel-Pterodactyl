<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xynoz Database Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'blob': 'blob 10s infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #f8fafc; /* Slate 50 */
            font-family: 'Inter', sans-serif;
            color: #1e293b; /* Slate 800 */
        }
        
        /* === Custom CSS untuk Animasi Mengambang === */
        @keyframes float-slow {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }
        @keyframes float-slower {
            0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); }
            50% { transform: translateY(15px) translateX(10px) rotate(-5deg); }
        }
        @keyframes float-reverse {
             0%, 100% { transform: translateY(0px) rotate(0deg); }
             50% { transform: translateY(20px) rotate(-3deg); }
         }

        .animate-float-slow { animation: float-slow ease-in-out infinite; }
        .animate-float-slower { animation: float-slower ease-in-out infinite; }
        .animate-float-reverse { animation: float-reverse ease-in-out infinite; }

        /* Icon di background */
        .bg-icon {
            position: absolute;
            color: rgba(148, 163, 184, 0.25); /* Slate 400 dengan transparansi tinggi */
            z-index: -5; /* Di belakang blob pastel */
            pointer-events: none; /* Agar tidak bisa diklik */
            user-select: none;
        }
        
        /* === Akhir Custom CSS === */


        /* Modern Card Style */
        .card-modern {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 1);
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.05), 
                        0 4px 6px -4px rgba(0, 0, 0, 0.02);
        }

        /* Input Fields */
        .input-modern {
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        .input-modern:focus {
            background: #ffffff;
            border-color: #6366f1;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 px-4 relative overflow-hidden">

    <div class="fixed inset-0 w-full h-full overflow-hidden pointer-events-none">
        <i class="fab fa-js bg-icon text-7xl top-10 left-10 animate-float-slow" style="animation-duration: 15s;"></i>
        <i class="fab fa-python bg-icon text-6xl top-32 left-1/4 animate-float-reverse" style="animation-duration: 18s; animation-delay: 1s;"></i>
        
        <i class="fab fa-react bg-icon text-7xl top-20 right-20 animate-float-slower" style="animation-duration: 20s; animation-delay: 2s;"></i>
        <i class="fab fa-node-js bg-icon text-5xl top-40 right-[30%] animate-float-slow" style="animation-duration: 12s; animation-delay: 0.5s;"></i>
        
        <i class="fab fa-html5 bg-icon text-6xl bottom-32 left-20 animate-float-slower" style="animation-duration: 16s; animation-delay: 3s;"></i>
        <i class="fab fa-css3-alt bg-icon text-5xl bottom-10 left-[25%] animate-float-reverse" style="animation-duration: 14s; animation-delay: 1.5s;"></i>

        <i class="fab fa-docker bg-icon text-7xl bottom-20 right-10 animate-float-slow" style="animation-duration: 19s; animation-delay: 2.5s;"></i>
        <i class="fab fa-git-alt bg-icon text-6xl bottom-40 right-1/3 animate-float-reverse" style="animation-duration: 17s; animation-delay: 4s;"></i>
        
        <i class="fas fa-code bg-icon text-4xl top-1/2 left-1/2 opacity-10 animate-float-slower" style="animation-duration: 25s;"></i>
        <i class="fas fa-terminal bg-icon text-4xl top-[60%] right-[40%] opacity-10 animate-float-slow" style="animation-duration: 22s;"></i>
    </div>
    <div class="fixed inset-0 w-full h-full overflow-hidden -z-1 pointer-events-none">
        <div class="absolute top-0 left-1/4 w-96 h-96 bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"></div>
        <div class="absolute top-0 right-1/4 w-96 h-96 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"></div>
        <div class="absolute -bottom-32 left-1/3 w-96 h-96 bg-indigo-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000"></div>
    </div>

    <header class="w-full max-w-5xl mb-8 flex flex-col md:flex-row justify-between items-center card-modern p-6 rounded-2xl z-10 relative">
        <div class="flex items-center gap-4">
            <div class="w-12 h-12 rounded-xl bg-gradient-to-tr from-slate-800 to-slate-600 flex items-center justify-center shadow-lg shadow-slate-300">
                <i class="fas fa-database text-white text-xl"></i>
            </div>
            <div>
                <h1 class="text-2xl font-bold text-slate-800 tracking-tight">XYNOZ <span class="text-indigo-600">MANAGER</span></h1>
                <p class="text-xs text-slate-500 font-medium flex items-center gap-2">
                    <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                    System Operational • GitHub API
                </p>
            </div>
        </div>
        
        <div class="flex gap-6 mt-4 md:mt-0">
            <div class="text-right border-r border-slate-200 pr-6">
                <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Status</p>
                <p class="text-sm font-bold text-green-600 bg-green-50 px-2 rounded-md inline-block">Online</p>
            </div>
            <div class="text-right">
                <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Storage</p>
                <p class="text-sm font-bold text-slate-700">db.json</p>
            </div>
        </div>
    </header>

    <main class="w-full max-w-5xl grid grid-cols-1 lg:grid-cols-3 gap-6 z-10 relative">
        
        <div class="lg:col-span-1 space-y-6">
            
            <div class="card-modern p-6 rounded-2xl">
                <h2 class="text-lg font-bold text-slate-800 mb-5 flex items-center gap-2">
                    <i class="fas fa-plus-square text-indigo-500"></i> Input Token
                </h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="text-xs font-bold text-slate-400 uppercase ml-1 mb-1 block">Bot Token</label>
                        <input type="text" id="tokenInput" placeholder="Paste token disini..." 
                            class="w-full input-modern rounded-xl p-3 text-sm text-slate-700 outline-none placeholder-slate-400 font-mono">
                    </div>
                    <button onclick="addToken()" id="btnSave" class="w-full py-3 rounded-xl bg-slate-900 hover:bg-slate-800 text-white font-bold text-sm shadow-lg shadow-slate-300 transition-all transform hover:-translate-y-1 active:scale-95 flex items-center justify-center gap-2">
                        <i class="fas fa-save"></i> SIMPAN TOKEN
                    </button>
                </div>
            </div>

            <div class="card-modern p-6 rounded-2xl">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 border-b border-slate-100 pb-2">
                    Server Status
                </h3>
                <div class="space-y-4">
                    <div>
                        <div class="flex justify-between text-xs mb-1 font-medium">
                            <span class="text-slate-500">API Latency</span>
                            <span class="text-green-600">24ms</span>
                        </div>
                        <div class="w-full bg-slate-100 rounded-full h-1.5">
                            <div class="bg-green-500 h-1.5 rounded-full" style="width: 15%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-xs mb-1 font-medium">
                            <span class="text-slate-500">Database Load</span>
                            <span class="text-indigo-600">Stable</span>
                        </div>
                        <div class="w-full bg-slate-100 rounded-full h-1.5">
                            <div class="bg-indigo-500 h-1.5 rounded-full" style="width: 45%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="lg:col-span-2 flex flex-col h-[550px]">
            <div class="card-modern flex-1 rounded-2xl p-6 flex flex-col relative overflow-hidden">
                <div class="flex justify-between items-center mb-6 pb-4 border-b border-slate-100">
                    <h2 class="text-xl font-bold text-slate-800 flex items-center gap-3">
                        <span class="bg-indigo-50 text-indigo-600 p-2 rounded-lg"><i class="fas fa-list"></i></span>
                        Token Aktif
                    </h2>
                    <div class="flex items-center gap-3">
                        <span id="tokenCount" class="bg-slate-100 text-slate-600 text-xs font-bold px-3 py-1 rounded-full">0</span>
                        <button onclick="loadTokens()" class="w-8 h-8 rounded-lg bg-slate-100 hover:bg-slate-200 text-slate-500 hover:text-indigo-600 transition-colors flex items-center justify-center">
                            <i class="fas fa-sync-alt" id="refreshIcon"></i>
                        </button>
                    </div>
                </div>

                <div class="flex-1 overflow-hidden relative">
                    <div class="absolute inset-0 overflow-y-auto p-1 space-y-2 pr-2" id="tokenList">
                        <div class="flex flex-col items-center justify-center h-full text-slate-400 gap-3">
                            <i class="fas fa-circle-notch fa-spin text-3xl text-indigo-500"></i>
                            <span class="text-sm font-medium">Memuat data...</span>
                        </div>
                    </div>
                </div>

                <div class="mt-4 pt-4 border-t border-slate-100 flex justify-between items-center text-[10px] text-slate-400 font-medium">
                    <span id="lastSync">Sync: -</span>
                    <span class="flex items-center gap-1"><i class="fas fa-lock text-xs"></i> SSL Secure</span>
                </div>
            </div>
        </div>

    </main>

    <footer class="mt-8 text-center text-slate-400 text-xs font-medium z-10 relative">
        <p>&copy; 2026 Xynoz Dev • <span class="text-indigo-400">Xynoz DataBase Manager v1.0.0</span></p>
    </footer>

    <script>
        const CONFIG = {
            TOKEN: "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", 
            USER: "Xynoz-Xnoz",
            REPO: "DB-IMAGINATION-TRASHER",
            FILE: "db.json"
        };
        
        const API_URL = `https://api.github.com/repos/${CONFIG.USER}/${CONFIG.REPO}/contents/${CONFIG.FILE}`;

        function updateTime() {
            const now = new Date();
            document.getElementById('lastSync').innerText = "Sync: " + now.toLocaleTimeString();
        }

        async function loadTokens() {
            const listEl = document.getElementById('tokenList');
            const countEl = document.getElementById('tokenCount');
            const refreshIcon = document.getElementById('refreshIcon');
            
            refreshIcon.classList.add('fa-spin');
            
            try {
                const response = await axios.get(API_URL + '?t=' + new Date().getTime(), {
                    headers: { Authorization: `token ${CONFIG.TOKEN}` }
                });

                const content = JSON.parse(atob(response.data.content));
                const tokens = content.tokens || [];

                countEl.innerText = `${tokens.length}`;

                if (tokens.length === 0) {
                    listEl.innerHTML = `
                        <div class="flex flex-col items-center justify-center h-full text-slate-400">
                            <i class="fas fa-folder-open text-4xl mb-2 opacity-30"></i>
                            <p class="text-xs">Database Kosong</p>
                        </div>`;
                } else {
                    listEl.innerHTML = tokens.map((t, index) => `
                        <div class="group flex items-center justify-between p-3 bg-white hover:bg-indigo-50 border border-slate-200 hover:border-indigo-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow-md">
                            <div class="flex items-center gap-3 overflow-hidden">
                                <div class="w-6 h-6 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center text-[10px] font-bold font-mono group-hover:bg-white group-hover:text-indigo-600">
                                    ${index + 1}
                                </div>
                                <code class="text-xs sm:text-sm text-slate-600 font-mono truncate select-all">${t}</code>
                            </div>
                            <button onclick="deleteToken('${t}')" class="w-8 h-8 rounded-lg flex items-center justify-center text-slate-400 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100" title="Hapus">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    `).join('');
                }
                updateTime();

            } catch (error) {
                console.error(error);
                listEl.innerHTML = `
                    <div class="flex flex-col items-center justify-center h-full text-red-500 gap-2">
                        <i class="fas fa-exclamation-triangle text-2xl"></i>
                        <p class="text-xs font-bold">Koneksi Gagal</p>
                    </div>`;
            } finally {
                refreshIcon.classList.remove('fa-spin');
            }
        }

        async function addToken() {
            const input = document.getElementById('tokenInput');
            const btn = document.getElementById('btnSave');
            const token = input.value.trim();

            if (!token) return alert("❌ Token kosong!");

            const originalBtn = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> PROSES...';
            btn.disabled = true;

            try {
                const { data } = await axios.get(API_URL, { headers: { Authorization: `token ${CONFIG.TOKEN}` } });
                let jsonContent = JSON.parse(atob(data.content));

                if (jsonContent.tokens.includes(token)) {
                    alert("⚠️ Token sudah ada!");
                    return;
                }

                jsonContent.tokens.push(token);

                await axios.put(API_URL, {
                    message: "Web: Add Token",
                    content: btoa(JSON.stringify(jsonContent, null, 2)),
                    sha: data.sha
                }, { headers: { Authorization: `token ${CONFIG.TOKEN}` } });

                input.value = '';
                loadTokens();

            } catch (error) {
                alert("Gagal: " + error.message);
            } finally {
                btn.innerHTML = originalBtn;
                btn.disabled = false;
            }
        }

        async function deleteToken(targetToken) {
            if(!confirm("⚠️ Hapus token ini?")) return;

            try {
                const { data } = await axios.get(API_URL, { headers: { Authorization: `token ${CONFIG.TOKEN}` } });
                let jsonContent = JSON.parse(atob(data.content));
                
                jsonContent.tokens = jsonContent.tokens.filter(t => t !== targetToken);

                await axios.put(API_URL, {
                    message: "Web: Delete Token",
                    content: btoa(JSON.stringify(jsonContent, null, 2)),
                    sha: data.sha
                }, { headers: { Authorization: `token ${CONFIG.TOKEN}` } });

                loadTokens();

            } catch (error) {
                alert("Gagal: " + error.message);
            }
        }

        window.onload = loadTokens;
    </script>
</body>
</html>
